
[DEFAULT]
verbose = True
rootwrap_config = /etc/cinder/rootwrap.conf
api_paste_confg = /etc/cinder/api-paste.ini
auth_strategy = keystone
state_path = /var/lib/cinder
lock_path = /var/lock/cinder
volumes_dir = /var/lib/cinder/volumes

rabbit_host = {{ controller }}
rabbit_userid = openstack
rabbit_password = {{ pillar.openstack.rabbit_pass }}

auth_strategy = keystone

my_ip = {{ private_ip }}

{%- if "openstack-volume" in grains.get("roles", []) %}

{%- if pillar.openstack.cinder.driver == "nfs" %}
volume_driver=cinder.volume.drivers.nfs.NfsDriver
{%- endif %}

{%- endif %}

[database]
connection = mysql://cinder:{{ pillar.openstack.cinder_dbpass }}@{{ controller }}/cinder

[keystone_authtoken]
auth_uri = http://{{ controller }}:5000/v2.0
identity_uri = http://{{ controller }}:35357
admin_tenant_name = service
admin_user = cinder
admin_password = {{ pillar.openstack.cinder_pass }}
revocation_cache_time = 10

